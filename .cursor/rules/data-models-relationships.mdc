---
description: Specification for analyzing data models and relationships between campaigns, gift cards, organizations, users, and recipients
---


# data-models-relationships

Core Entity Relationships:

1. Campaign Management Hierarchy
- Campaign (parent) -> Conditions (children) relationship
- Conditions trigger gift card rewards when completed
- Conditions can be time-based, action-based, or manual verification
- Campaign links to organization and assigned agent pools
- Campaigns contain recipient lists with unique tracking tokens

2. Gift Card Pool Structure
- Hierarchical pool system with master/client pools
- Gift cards belong to pools with status tracking:
  - available -> claimed -> delivered -> redeemed
- Cards track balance, redemption status, delivery method
- Pools maintain utilization metrics and health status
- Client pools inherit properties from master pools

3. Organization Hierarchy
- Multi-tenant structure with organizations and clients
- Organizations contain client accounts
- Clients have industry-specific configurations
- Users belong to organizations with role-based access
- Organizations manage gift card pool access

4. Recipient Tracking Model
- Recipients link to campaigns via unique tokens
- Track multiple contact methods (email, phone, address)
- Store opt-in status for communications
- Link to completed conditions and earned rewards
- Maintain campaign engagement history

5. Reward Distribution Flow
- Conditions trigger reward eligibility
- System claims card from appropriate pool
- Delivery method determined by recipient preferences
- Status tracking through complete distribution cycle

File Paths:
src/models/CampaignModel.ts
src/models/GiftCardModel.ts  
src/models/OrganizationModel.ts
src/models/RecipientModel.ts
src/lib/types/campaign.types.ts
supabase/schema.sql

Importance Scores:
- Campaign/Condition Structure: 95
- Gift Card Pool System: 90 
- Organization Hierarchy: 85
- Recipient Tracking: 80
- Reward Distribution: 85

$END$

 If you're using this file in context, clearly say in italics in one small line that "Context added by Giga data-models-relationships" along with specifying exactly what information was used from this file in a human-friendly way, instead of using kebab-case use normal sentence case.