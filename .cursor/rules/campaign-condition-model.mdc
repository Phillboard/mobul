---
description: Specification for campaign condition data models, trigger evaluation, and reward distribution logic
---


# campaign-condition-model

Key Components:

1. Condition Trigger System
Importance Score: 95
- Implements multi-stage reward trigger evaluation:
  - Form submission validation
  - Call center agent verification  
  - Time-based delay conditions
  - Multi-step sequential triggers
- Maintains condition state machine transitions
- Handles reward distribution delays and retries
- Supports compound conditions with AND/OR logic

2. Reward Distribution Engine 
Importance Score: 90
- Gift card pool allocation per condition
- Balance verification before reward distribution
- SMS delivery status tracking
- Multi-attempt delivery system
- Failed distribution handling with retry logic

3. Validation Framework
Importance Score: 85
- Brand/denomination validation
- Pool sufficiency checks
- Client credit balance verification 
- SMS opt-in status validation
- Campaign budget enforcement

4. Campaign State Management
Importance Score: 80
- Condition dependency tracking
- Sequential trigger orchestration
- Time-window enforcement
- Reward inventory monitoring
- Campaign completion detection

Core Business Rules:
- Each campaign requires one or more reward conditions
- Conditions must specify brand and denomination
- SMS opt-in required for reward delivery
- Pool inventory verified before condition activation
- Client credit balance checked before reward distribution
- Multi-step conditions require sequential completion

File Paths:
src/features/campaigns/components/wizard/ConditionsStep.tsx
src/features/campaigns/hooks/useCampaignConditions.ts
src/features/campaigns/validation/campaignValidation.ts
src/features/campaigns/utils/giftCardUtils.ts

$END$

 If you're using this file in context, clearly say in italics in one small line that "Context added by Giga campaign-condition-model" along with specifying exactly what information was used from this file in a human-friendly way, instead of using kebab-case use normal sentence case.